{"version":3,"sources":["components/phonebookForm.js","components/persons.js","components/filter.js","components/crud.js","App.js","components/notification.js","index.js"],"names":["PhonebookForm","addPerson","newName","newNumber","setNewName","setNewNumber","onSubmit","value","onChange","event","console","log","target","type","Persons","filtPersons","newFilter","persons","deletePerson","filter","person","lowCase","toLowerCase","name","pm","map","i","className","key","number","id","onClick","Filter","setFilter","baseUrl","getAll","axios","get","then","response","data","create","newObject","post","update","put","remove","delete","PersonForm","phonebookForm","Notification","message","messageStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","setPersons","newMessage","setMessage","useEffect","notificationTimeOut","setTimeout","preventDefault","some","alert","window","confirm","find","n","changedNumber","nps","catch","error","personObject","length","concat","currentTarget","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cb2b7532.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PhonebookForm = function({\r\n  addPerson,\r\n  newName,\r\n  newNumber,\r\n  setNewName,\r\n  setNewNumber\r\n}) {\r\n  const handleNewNameField = event => {\r\n    console.log(event.target.value);\r\n    setNewName(event.target.value);\r\n  };\r\n  const handleNewNumberField = event => {\r\n    console.log(event.target.value);\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNewNameField} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNewNumberField} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PhonebookForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = function({ newFilter, persons, deletePerson }) {\r\n  let filtPersons;\r\n  if (newFilter !== \"\") {\r\n    filtPersons = persons.filter(function(person) {\r\n      const lowCase = newFilter.toLowerCase();\r\n      return person.name.toLowerCase() === lowCase;\r\n    });\r\n  } else {\r\n    filtPersons = persons;\r\n  }\r\n  console.log(\"PERSONS\", filtPersons);\r\n  const pm = filtPersons.map(function(person, i) {\r\n    return (\r\n      <>\r\n        <li className=\"person\" key={i}>\r\n          Name: {person.name} number: {person.number}\r\n          <div>\r\n            <button id={person.id} onClick={deletePerson}>\r\n              delete\r\n            </button>\r\n          </div>\r\n        </li>\r\n      </>\r\n    );\r\n  });\r\n\r\n  return <ul>{pm}</ul>;\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = function({ newFilter, setFilter }) {\r\n  const handleFilter = event => {\r\n    console.log(event.target.value);\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <div>\r\n        Filter: <input value={newFilter} onChange={handleFilter}></input>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"http://localhost:3001/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst remove = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  remove\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport phonebookForm from \"./components/phonebookForm\";\r\nimport persons from \"./components/persons\";\r\nimport filter from \"./components/filter\";\r\nimport crud from \"./components/crud\";\r\nimport notification from \"./components/notification\";\r\n//server requests\r\nconst getAll = crud.getAll;\r\nconst create = crud.create;\r\nconst update = crud.update;\r\nconst remove = crud.remove;\r\n\r\n//other components\r\nconst Filter = filter;\r\nconst Persons = persons;\r\nconst PersonForm = phonebookForm;\r\nconst Notification = notification;\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [newFilter, setFilter] = useState(\"\");\r\n  const [newMessage, setMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getAll().then(function(response) {\r\n      setPersons(response);\r\n    });\r\n  }, []);\r\n\r\n  const notificationTimeOut = function() {\r\n    setTimeout(() => {\r\n      setMessage(null);\r\n    }, 5000);\r\n  };\r\n\r\n  const addPerson = function(event) {\r\n    event.preventDefault();\r\n\r\n    if (\r\n      persons.some(\r\n        person =>\r\n          person.name.toLowerCase() === newName.toLowerCase() &&\r\n          person.number.toLowerCase() === newNumber.toLowerCase()\r\n      ) ||\r\n      newName === \"\"\r\n    ) {\r\n      alert(`${newName} already in the list or field is empty`);\r\n    } else if (\r\n      persons.some(\r\n        person =>\r\n          person.name.toLowerCase() === newName.toLowerCase() &&\r\n          person.number.toLowerCase() !== newNumber.toLowerCase()\r\n      )\r\n    ) {\r\n      if (window.confirm(\"do you want to update the number for \" + newName)) {\r\n        const person = persons.find(\r\n          n => n.name.toLowerCase() === newName.toLowerCase()\r\n        );\r\n        const changedNumber = { ...person, number: newNumber };\r\n        update(person.id, changedNumber)\r\n          .then(function(response) {\r\n            const nps = persons.map(function(person) {\r\n              if (person.id === response.id) {\r\n                return (person = response);\r\n              }\r\n              return person;\r\n            });\r\n            setPersons(nps);\r\n            setMessage(`${person.name}' has not been updated`);\r\n            notificationTimeOut();\r\n          })\r\n          .catch(function(error) {\r\n            setMessage(\r\n              `${person.name}' has not been added to Phonebook succesfully due to '${error}`\r\n            );\r\n            notificationTimeOut();\r\n          });\r\n      }\r\n    } else {\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber,\r\n        id: persons.length + 1\r\n      };\r\n\r\n      create(personObject)\r\n        .then(function(response) {\r\n          setPersons(persons.concat(response));\r\n          setMessage(`${response.name}' added to Phonebook succesfully`);\r\n          notificationTimeOut();\r\n        })\r\n        .catch(function(error) {\r\n          setMessage(\r\n            `${personObject.name}' has not been added to Phonebook succesfully due to '${error}`\r\n          );\r\n          notificationTimeOut();\r\n        });\r\n    }\r\n\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const deletePerson = function(event) {\r\n    const id = event.currentTarget.id;\r\n    remove(id)\r\n      .then(function(response) {\r\n        getAll()\r\n          .then(function(response) {\r\n            setPersons(response);\r\n            setMessage(\"User deleted\");\r\n            notificationTimeOut();\r\n          })\r\n          .catch(function(error) {\r\n            setMessage(`failed to to retrieve phonebook due to '${error}`);\r\n            notificationTimeOut();\r\n          });\r\n      })\r\n      .catch(function(error) {\r\n        setMessage(`deleting user was not succesfull due to '${error}`);\r\n        notificationTimeOut();\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Filter newFilter={newFilter} setFilter={setFilter} />\r\n\r\n      <h3>Add a new</h3>\r\n      <Notification message={newMessage} />\r\n\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        setNewName={setNewName}\r\n        setNewNumber={setNewNumber}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <Persons\r\n        persons={persons}\r\n        newFilter={newFilter}\r\n        deletePerson={deletePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n//<Persons newFilter={newFilter} persons={persons} />\r\nexport default App;\r\n","import React from \"react\";\r\n\r\nconst Notification = function({ message }) {\r\n  let messageStyle = {\r\n    color: \"gray\",\r\n    background: \"lightgrey\",\r\n    fontSize: \"20px\",\r\n    borderStyle: \"solid\",\r\n    borderRadius: \"5px\",\r\n    padding: \"10px\",\r\n    marginBottom: \"10px\"\r\n  };\r\n\r\n  if (message === null) {\r\n    messageStyle = {};\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div style={messageStyle} className=\"message\">\r\n      {message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}